import{S as ee,i as te,s as ae,e as F,b as U,d as x,f as re,g as B,h as i,o as se,v as oe,y as K,z as Q,A as X,I as le,B as Y,k as m,q as C,a as A,l as _,m as v,r as H,c as D,n as f,D as l,u as ne}from"../chunks/index.7d0cd1aa.js";import{C as ce}from"../chunks/CodeEditor.ce3d2898.js";import{u as ie}from"../chunks/auth.84a3bd22.js";import{L as ue}from"../chunks/LoginRequired.ae69db76.js";function fe(p){let e,t;return e=new ue({}),{c(){K(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,c){X(e,a,c),t=!0},p:le,i(a){t||(B(e.$$.fragment,a),t=!0)},o(a){x(e.$$.fragment,a),t=!1},d(a){Y(e,a)}}}function de(p){let e,t,a,c,k,s,u,r,d,o=p[0].name+"",y,N,h,w,z,g,V,G,q,M,J,R,L,T,E,O;return E=new ce({props:{projectdata:p[0]}}),{c(){e=m("nav"),t=m("div"),a=m("h5"),c=m("a"),k=C("Home"),s=C(" > "),u=m("a"),r=C("All Projects"),d=C(" > "),y=C(o),N=A(),h=m("div"),w=m("input"),z=A(),g=m("label"),V=m("div"),G=A(),q=m("div"),M=A(),J=m("div"),R=A(),L=m("div"),T=A(),K(E.$$.fragment),this.h()},l(n){e=_(n,"NAV",{class:!0});var b=v(e);t=_(b,"DIV",{class:!0});var P=v(t);a=_(P,"H5",{});var I=v(a);c=_(I,"A",{href:!0});var W=v(c);k=H(W,"Home"),W.forEach(i),s=H(I," > "),u=_(I,"A",{href:!0});var $=v(u);r=H($,"All Projects"),$.forEach(i),d=H(I," > "),y=H(I,o),I.forEach(i),P.forEach(i),N=D(b),h=_(b,"DIV",{class:!0});var S=v(h);w=_(S,"INPUT",{id:!0,type:!0,name:!0}),z=D(S),g=_(S,"LABEL",{for:!0});var j=v(g);V=_(j,"DIV",{class:!0}),v(V).forEach(i),G=D(j),q=_(j,"DIV",{class:!0}),v(q).forEach(i),M=D(j),J=_(j,"DIV",{class:!0}),v(J).forEach(i),j.forEach(i),R=D(S),L=_(S,"DIV",{class:!0});var Z=v(L);Z.forEach(i),S.forEach(i),b.forEach(i),T=D(n),Q(E.$$.fragment,n),this.h()},h(){f(c,"href","/"),f(u,"href","/write-code-online"),f(t,"class","nav-brand"),f(w,"id","collapsible1"),f(w,"type","checkbox"),f(w,"name","collapsible1"),f(V,"class","bar1"),f(q,"class","bar2"),f(J,"class","bar3"),f(g,"for","collapsible1"),f(L,"class","collapsible-body"),f(h,"class","collapsible"),f(e,"class","split-nav")},m(n,b){U(n,e,b),l(e,t),l(t,a),l(a,c),l(c,k),l(a,s),l(a,u),l(u,r),l(a,d),l(a,y),l(e,N),l(e,h),l(h,w),l(h,z),l(h,g),l(g,V),l(g,G),l(g,q),l(g,M),l(g,J),l(h,R),l(h,L),U(n,T,b),X(E,n,b),O=!0},p(n,b){(!O||b&1)&&o!==(o=n[0].name+"")&&ne(y,o);const P={};b&1&&(P.projectdata=n[0]),E.$set(P)},i(n){O||(B(E.$$.fragment,n),O=!0)},o(n){x(E.$$.fragment,n),O=!1},d(n){n&&i(e),n&&i(T),Y(E,n)}}}function me(p){let e,t,a,c;const k=[de,fe],s=[];function u(r,d){return r[1]?0:1}return e=u(p),t=s[e]=k[e](p),{c(){t.c(),a=F()},l(r){t.l(r),a=F()},m(r,d){s[e].m(r,d),U(r,a,d),c=!0},p(r,[d]){let o=e;e=u(r),e===o?s[e].p(r,d):(oe(),x(s[o],1,1,()=>{s[o]=null}),re(),t=s[e],t?t.p(r,d):(t=s[e]=k[e](r),t.c()),B(t,1),t.m(a.parentNode,a))},i(r){c||(B(t),c=!0)},o(r){x(t),c=!1},d(r){s[e].d(r),r&&i(a)}}}function _e(p,e,t){let{data:a}=e,c,k="",s,u=!1,r;ie.subscribe(o=>{o?t(1,r=JSON.parse(o)):t(1,r=null)});let d="https://codingchaska.up.railway.app/api/v1/editor/projectcodes/?project="+a.id;return fetch(d).then(async o=>{if(o.ok){let y=await o.json();t(3,k=y.results[0].code)}}).catch(o=>{}),se(async()=>{let o="ws://143.110.190.99:5000/ws/socket-server/";const y=new WebSocket(o);t(4,s=y),t(4,s.onopen=()=>{s.send(JSON.stringify({task:"create_container",container_name:a.container_name,image_name:"terminal-image"}))},s),t(4,s.onmessage=function(N){JSON.parse(N.data).message==="container_created"&&(console.log("Got the creation"),setTimeout(()=>{t(2,c=a.container_name)},1e3))},s),t(5,u=!0)}),p.$$set=o=>{"data"in o&&t(0,a=o.data)},p.$$.update=()=>{p.$$.dirty&60&&u&&s&&setTimeout(()=>{try{s.send(JSON.stringify({task:"save_code",code:k,container_name:c,file_name:"/src/main.py"}))}catch{}},500)},[a,r,c,k,s,u]}class ke extends ee{constructor(e){super(),te(this,e,_e,me,ae,{data:0})}}export{ke as default};
